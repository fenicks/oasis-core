internal: Refactor project's version handling

Simplify version computation logic in Make files and start using Punch's
version file to track version.
